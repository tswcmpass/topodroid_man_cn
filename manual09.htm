<html><body>
<h3>[9] 草图窗口</h3>

在<u>数据窗口</u>中的<i>草图</i>按钮会打开带有草图列表的对话框，还有一个<i>新草图</i>按钮。点击此按钮以创建新的测量草图。<br><p>

每个草图由两个草图文件组成：一个用于平面图视图，另一个用于剖面图视图（延展或投影）。横断面只有一个文件。新草图在平面图视图中打开。之后，草图对话框显示两列，一列用于平面图，另一列用于剖面图视图，您可以选择从哪一个打开。<br>
每个草图都可以包含多个片段。<br><p>

<u>延展</u>的剖面图视图显示中线，根据它们的“延展”将测点绘制在左侧或右侧，或垂直方向。如果主线的"延展"未设置，那么从那个主线开始，中线就不再显示。
侧线在方位上最接近的测点的垂直面上投影，除非用户通过测点编辑对话框设置了给定的“延展”。
例如，在下图的平面图中，亮区的侧线在测点1-2的垂直面上投影，暗区的则在0-1的垂直面上投影。<br><p>

<u>投影</u>的剖面图视图显示中线和垂直于投影方位的垂直面中的侧线。<br><p>

<img src="splay_extend.png"><br><p>

<b>主线</b><br>

主线的颜色是：
<ul>
<li>正常：白色</li>
<li>异常字段值：红色</li>
<li>与复测主线不一致：橙色</li>
</ul><br><p>

<b>侧线</b><br>

侧线可以显示为线段或点 [G]。
当窗口处于选择模式时，侧线始终显示为线段。<br>

侧线的颜色是[E/G]：
<ul>
<li>有注释的：深绿色</li>
<li>x-侧线 (LRUD)：绿色</li>
<li>h-侧线：深蓝色（平面图），深蓝色（剖面图）</li>
<li>v-侧线：深蓝色（平面图），深蓝色（剖面图）</li>
<li>其他：浅灰色</li>
</ul><br><p>

可以设置侧线的透明度（不透明度级别）[G]。<br>
侧线的颜色可以在调色板中选择，或使用颜色拾取器[G]进行选择。<br>
如果测点在平面图或剖面图视图中标记为不显示，则不显示侧线。<br><p>

如果侧线虚线[G]未禁用，它们可以显示为虚线或点线。<br>
如果侧线虚线设置为<i>方位</i>，当与"最近"主线的方位角超过虚线方位阈值时，侧线为虚线，[默认60&deg;]。<br>
如果侧线虚线设置为<i>倾角</i>，当侧线的倾角超过虚线倾角阈值时，侧线为虚线：点线（正倾角）和虚线（负倾角）。<br>
如果侧线虚线设置为<i>按视图</i>，在平面图视图中，侧线根据倾角进行虚线化，而在延展的剖面图视图中，侧线根据方位进行虚线化。<br>
在投影的剖面图中，侧线根据它们与投影方向形成的角度进行虚线化。<br><p>

此外，在<u>平面图</u>视图中，如果侧线的倾角超过平面图视图阈值[默认80&deg;]，侧线将不显示。<br>

对于<u>横断面</u>：
<ul>
<li>x-侧线 (LRUD) 是绿色</li>
<li>其他侧线为蓝色：在TO测站为深蓝，FROM测站为浅蓝</li>
<li>最后，如果启用了侧线虚线，它们将显示为点线或虚线
当侧线与横断面平面法线的夹角低于虚线角阈值[默认60&deg;]（如果在法线方向则为点线，如果在相反方向则为虚线）。</li>
</ul><br>

侧线的虚线和点线颜色可以通过相应的设置[G]进行更改。<br><p>

<b>测站</b><br>
测站的颜色有：
<ul>
<li>紫色：默认</li>
<li>绿色：活动测站</li>
<li>红色：该测站之后主线被隐藏</li>
<li>蓝色：该测站之前主线被隐藏</li>
<li>黄色：保存的测站 [T/G]</li>
</ul><br><p>

<b>交互模式</b><br>
<u>草图窗口</u>有四种交互模式：
<ul style="margin-top=0">
<li><b>移动</b>：您可以移动画布，并放大/缩小。如果在参考对话框中设置了“固定引用”，则只会影响绘图[T]。</li>
<li><b>绘制</b>：在此模式下，您可以添加图标符号（点，包括标签），并绘制线条和区域（填充颜色或图案的封闭区域）。</li>
<li><b>擦除</b>：用于从草图中擦除项目，线条/区域，或它们的部分。</li>
<li><b>编辑</b> [A]：进行点对点的更改和项目属性编辑，包括删除项目。</li>
</ul><br><p>

在<b>绘制</b>和<b>擦除</b>模式下使用两个手指也可以进行平移和缩放。
如果启用了“拖拽角落”，则可以从画布的角落“拖动”草图。
角落显示为透明灰色。<br>
可以启用缩放控制（临时或永久）。如果是临时的，当您在画布底部中间位置轻触时，它们会显示出来。<br><p>

<h4>按钮</h4>
这些模式由左侧的三个绿色按钮表示：<i>绘制</i>，<i>擦除</i>和<i>编辑</i>。其中一个处于“开”状态时，相关按钮将显示明亮的绿色。如果都没有开启，则模式为<i>移动</i>。<br><p>

当绿色按钮处于“开”状态时，长按它将打开一个对话框，以编辑与按钮模式相关的设置。<br><p>

<img src="btn_draw_erase_edit.png">
<br clear=all>

其余的按钮取决于模式。在<b>移动</b>模式下，它们是：
<ul style="margin-top=0">
<li><img src="btn_download.png"> 数据<i>下载</i>。如果未选择设备，此按钮将被隐藏。
默认情况下，当下载并识别主线时，侧线和主线会被刷新。
使用刷新按钮强制刷新中心线。
最后下载的测点可以高亮为蓝色，以便与其他测点区分[G]。
</li>
<li><img src="btn_bluetooth.png"> <a href="page_bluetooth.htm">蓝牙</a> 重置/控制</li>
<li><img src="btn_note.png"> 测量<a href="page_survey_notes.htm">笔记</a></li>
<li><img src="btn_mode.png"> 绘图<a href="page_drawing_refs.htm">参考</a>：主线、侧线、测站、网格、比例尺和草图轮廓。</li>
<li><img src="btn_plan.png"> <i>平面图/剖面图</i> 切换。横断面的<i>侧线显示模式</i></li>
<li><img src="btn_azimuth.png"> <a href="page_azimuth.htm">"延展" 参考</a></li>
<li><img src="btn_refresh.png"> 刷新中心线</li>
</ul><br><p>

<b>绘制</b>模式除了绿色按钮外还有四个按钮：
<ul style="margin-top=0">
<li><img src="btn_undo.png"> 撤销最后一次绘制的项目，一次一个。</li>
<li><img src="btn_redo.png"> 一次将一个被移除的项目重新放回草图。当您绘制新内容时，被移除项目的列表将被清空。点对点的编辑操作也可能影响重做列表。</li>
<li><img src="btn_tools.png"> <a href="page_tools_list.htm">绘图工具</a> 切换器 / 选择器。</li>
<li>侧线显示模式：作为线段或点。</li>
<li><img src="btn_cont.png"> 线<i>连接</i>或继续</li>
</ul><br><p>

<i>工具</i>按钮的图标反映了当前绘图工具的类型：点、线或区域。<br><p>

<b>擦除</b>模式除了绿色按钮外还有三个按钮：
<ul style="margin-top=0">
<li><img src="btn_undo.png"> <i>撤销</i></li>
<li><img src="btn_redo.png"> <i>重做</i></li>
<li><img src="btn_erase.png"> 可擦除项目的类型：全部、点、线、区域</li>
<li><img src="btn_size.png"> 橡皮擦大小 [S, M, L]</li>
</ul><br><p>


The <b>编辑</b> [A] 模式除了绿色按钮外还有：
<ul style="margin-top=0">
<li><img src="btn_edit.png"> 可选择项的类型：全部、点、线、区域、测点、测站</li>
<li><img src="btn_size.png"> 选择工具的大小 [S, M, L]</li>
<li><img src="btn_point.png"> 点状和特殊操作</li>
<li><img src="btn_item.png"> 项目属性编辑</li>
<li><img src="btn_delete.png"> 从草图中删除项目（它会要求确认，可以“撤消”）。</li>
<li><img src="btn_range.png"> 范围选择：点状或本地（仅用于线和区域）。</li>
</ul><br><p>
当有选中的项目时，前两个按钮变为在选定项目集中的<i>前一个/下一个</i>导航按钮。<br><p>

用于横断面草图的按钮有所不同。
在<b>移动</b>模式下，"switch"、"azimuth" 和 "refresh" 按钮不显示，但有一个按钮可以选择显示哪个侧线。它循环穿过四个状态："both"、"viewed station"、"behind station"、"none"。
因此，绘图引用对话框没有侧线的框。
<br><p>

<b>长按操作</b><br>
<ul style="margin-top=0">
<li>长按每个<i>模式</i>按钮会打开相关设置对话框 [A]。</li>
<li><i>下载</i>按钮在多设备模式 [E] 下切换设备。</li>
<li>在平面图视图中，长按<i>延展参考</i>按钮，通过在显示屏上滑动手指，可以以图形方式编辑参考方位。按钮变为绿色 [E]。</li>
<li>在扩展剖面图视图中，长按<i>显示模式</i>按钮可以翻转草图 [N]。</li>
<li>对于横断面，它切换显示在剖面平面之外的侧线的显示 [T]。</li>
<li>长按<i>工具</i>按钮将反转底部工具栏的旋转顺序。</li>
<li>长按<i>删除</i>按钮将删除选中的线/区域点 [N]。</li>
<li>当选中的项目是一个剖面点时，长按项目<i>属性编辑</i>按钮将打开x-section草图 [T]。</li>
</ul><br><p>

<h4>菜单</h4>
当在测量数据缩减中检测到异常时，"menu" 按钮（垂直三点）将有一个红色感叹号。
长按按钮以显示关于异常的对话框。<br><p>

<ul style="margin-top=0">
<li><u>切换</u>到另一个草图或<u>关闭</u>。</li>
<li><u>导出</u>：草图可以<u><a href="page_plot_export.htm">导出</a></u>为 <i>Therion</i> th2, <i>cSurvey</i>, PNG, DXF (<i>LibreCAD</i>), SVG, xvi (<i>xtherion</i>), 和 shapefile (<i>QGIS</i>)。所有导出都生成两个文件，一个用于平面图，另一个用于剖面图，除了<i>cSurvey</i>，它在一个文件中同时具有这两者。</li>
<li><a href="page_stat2.htm">统计</a>。对于横断面，此操作会计算剖面面积。</li>
<li><u>重新加载</u>草图从<a href="page_backup.htm">备份副本</a>。</li>
<li><u>缩放适应</u>：对话框以适应草图到屏幕，并选择横向或纵向展示</li>
<li><u>重命名/删除/分割</u>草图。重命名和删除同时影响平面图和剖面图视图。已删除的草图可以恢复（在<u>数据窗口</u>中选择<u>恢复</u>菜单）。分割仅影响当前视图。</li>
<li><a href="page_plot_scraps.htm">碎片</a>对话框 [T]</li>
<li><a href="page_tools.htm">绘图工具</a>面板</li>
<li><u>概览视图窗口</u>，显示所有的测量草图在一起。 [仅用于平面图和扩展剖面图]</li>
<li><u>设置</u></li>
<li><u>帮助</u></li>
</ul><br><p>


<h4>草图设置</h4>
<ul style="margin-top=0">
  <li><i>角落拖动</i>：允许通过拖动角落进行平移</li>
  <li><i>缩放控制</i>：指定多点触控设备上如何显示缩放控制。缩放控制可以被隐藏，仅在用户轻触屏幕下部中间部分时短时间显示，或始终显示</li>
  <li><i>水平横断面</i>：主线倾斜阈值，用于水平横断面（剖面图）</li>
  <li><i>中线检查</i>：检查所有的主线是否连接到中线 [已禁用]</li>
  <li><i>延展检查</i>：检查所有的主线是否已定义“延展” [已启用]</li>
  
  <li><i>点工具</i>
    <ul style="margin-top:0; margin-bottom:0">
    <li><i>非缩放点</i>：缩放时，点项目保持固定大小</li>
    <li><i>绘制单位</i> 用于点符号</li>
    <li>标签 <i>文字大小</i> [24 pt]</li>
    </ul>
  <li><i>线工具</i>
    <ul style="margin-top=0; margin-bottom:0">
    <li>线<i>画笔宽度</i>（注意：墙线宽度为两倍）[1 px]</li>
    <li><i>绘制单位</i> 用于带有“路径效果”的线</li>
    <li>线<i>样式</i>：细，正常，粗，"样条曲线"（插值曲线），简化</li>
    <li>线<i>点间距</i>：正常样式下线点之间的距离 [5 px]</li>
    <li><i>方向刻度长度</i> 用于横断面线 [5 px]</li>
    <li><i>剖面点</i>：是否自动为“剖面”线添加一个“剖面”点 [默认是]</li>
    <li>线<i>默认连接模式</i>：无，起始，结束，两者，"继续"</li>
    <li>区域<i>边界</i> 默认可见性</li>
    </ul>
  </li>
  <li><i>草图项目</i>
    <ul style="margin-top:0; margin-bottom:0">
    <li>测点线<i>画笔宽度</i>（中线/侧线）</li>
    <li>测站名称<i>文字大小</i> [18 pt]</li>
    <li><b>编辑</b>模式下显示的<i>绿点</i>的大小 [5 px]</li>
    <li><i>选择</i> 半径，用于精细编辑草图；[16 px]</li>
    <li><i>橡皮擦</i>的基础大小</li>
    <li><i>移动灵敏度</i>：移动草图时的最大步距 [60 px]。如果草图移动不平滑，可以增加此值</li>
    <li>指<i>点半径</i>：选择时手指移动不得超过此范围</li>
    <li><i>侧线透明度</i>：不透明度水平 [0: 透明, 100: 不透明, 默认 80]</li>
    </ul>
  </li>
</ul><br><p>

<div style="font-size:90%">
<a href="page_geek.htm">自定义设置</a>:
<i>草图移动/缩放</i>, 
<i>草图分割/合并</i>,
<i>主线垂直阈值（超过阈值LRUD变为WENS）</i>,
<i>保存测站颜色</i>,
<i>当线被拉直时的角落最小角度</i>
<i>贝塞尔插值精度和角落阈值</i>,
<i>线简化距离、长度和缓冲区</i>,
<i>点状操作标志（线/区域吸附，平滑/拉直段，多选，复合操作）</i>,
<i>侧线虚化（模式、倾角阈值、方位阈值）</i>,
<i>备份数量和间隔</i>,
<i>备份清理菜单</i>,
<i>导出时自动横断面（csx、svg、dxf、xvi）</i>
<i>自动墙体设置</i>.
</div><br><p>


<h4>草图缓存</h4>
一旦打开草图，它们会被保留在内存中，存储在一个缓存中。这加速了在<u>数据窗口</u>和<u>草图窗口</u>之间切换，因为草图不需要从文件中重新读取。
当测量关闭时，草图缓存将被清空。<br><p>

<h4>草图文件格式</h4>
每当草图被修改，或当<u>草图窗口</u>切换到不同的视图时，草图都会被保存到文件中。
为了性能，TopoDroid以二进制格式保存草图。<br><p>

<h4>点选择 [A]</h4>
要进行一些编辑，您必须选择一个点：点项目、线/区域点、测站，或测点中点。
为此，您需要在想要的点附近轻触屏幕。然而，如果您轻触的地方有几个点很接近，它们都会被选中，但只有其中一个点会被编辑。您可以通过<i>上一个/下一个</i>按钮在选定的点集中更改“编辑”点。<br><p>

<h4>线样式</h4>
TopoDroid具有五种线样式。以正常样式[默认]，线会被绘制为折线。以精细样式，折线段较短，而以粗糙样式，它们则较长。在第四种样式中，线会通过替换段落与三次贝塞尔曲线（样条曲线）进行插值。这些段通过两个端点，并具有两个控制点用于定义曲率。
在第五种线样式中，追踪线通过使用一种剔除点的算法进行简化。
如果您以DXF版本6将图纸导出到dxf文件中，不要使用样条线，因为它们会被导出为折线。<br><p>

<h4>线连接</h4>
<i>连接</i>按钮是一个多状态按钮。
线的连接只能与其他碎片的线进行。
要连接的线必须属于同一组。如果您需要将不同组的线的两点“连接”，
您应将其中一个点移动至与另一个点重合。<br>
<ul>
<li><i>关闭</i>：当前类型的线不能被连接</li>
<li><i>否</i>：当前类型的线不会被连接</li>
<li><i>开始</i>：如果当前类型线的起点靠近另一线的端点，则会被连接到该线</li>
<li><i>结束</i>：当前类型的线将通过其终点与线连接</li>
<li><i>两者</i>：当前类型的线将通过其起点和终点与线连接</li>
<li><i>继续</i>：如果当前类型线的起点足够靠近另一线的端点，它将继续该线</li>
</ul>
<br>

当连接设置为“继续”时，最后一条已绘制的线可以像在Adobe Illustrator中那样被修改，即，
重绘线的一部分。<br>
“继续”影响了撤销堆栈，因为继续的线可以被移动到堆栈的顶部。
<br><p>


<div style="font-size:90%">
<h4>组合操作 [T]</h4>
组合操作是点对点的长按操作。<br>
目前唯一的长按操作是为线/区域<i>插入一个点</i>，同时将它吸附到附近的点上。
首先将选中的点移动到附近的点，然后复制它，将新点放在线/区域中它之后。
这允许通过选择最后一个点并向后插入点来重新追踪路径。<br>
要向前重新追踪路径，每次插入后切换选中的点。
</div><br><p>

<h4>纵向/横向展示</h4>
在纵向展示中，北方和垂直方向在平面图和剖面图视图中分别向上。
在横向展示中，它们向左，使得东方在平面图视图中向上，右方在剖面图视图中向上。<br>
在横向展示中，图标符号被旋转，以便在设备处于纵向模式时它们看起来自然。<br>
草图总是以北方和垂直方向向上的方式保存和导出。<br><p>

<b>警告。如果草图从显示屏消失，请在平面图和剖面图之间切换，以强制TopoDroid刷新它。</b><br><p>

<a href="page_tools.htm">绘图工具调色板</a><br>
<a href="page_therion_stations.htm">Therion测站点</a><br>
<a href="page_undo.htm">撤销堆栈</a><br>
<a href="page_shift.htm">草图移动和翻转</a><br>
<p>

<a href="manual08.htm">&lt; 测量信息</a> |
<a href="manual10.htm">草图绘制 &gt;</a>

</body></html>
